<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>EV3 Project merge utility</title>
    <script src="scripts/dropzone.js"></script>
    <link href="css/dropzone.css" type="text/css" rel="stylesheet" />
  </head>

  <body>
<!--
Don't forget to give this container the dropzone-previews class 
so the previews are formatted correctly.
 -->
    <div class="table table-striped" class="files" id="previews">
      <div id="template" class="file-row">
	<span class="name" data-dz-name></span>
	<img src="images/close.png" data-dz-remove class="btn btn-warning cancel">
	<strong class="error text-danger" data-dz-errormessage></strong>
      </div>
    </div>


<button id="clickable">Select files</button>
<button id="submit-all">Merge all files</button>

<script>
var previewNode = document.querySelector("#template");
previewNode.id = "";
var previewTemplate = previewNode.parentNode.innerHTML;
previewNode.parentNode.removeChild(previewNode);

  new Dropzone(document.body, { // Make the whole body a dropzone
      url: "/", // Set the url
      autoProcessQueue: false,
      uploadMultiple: true,
      createImageThumbnails: false,
      acceptedFiles: ".ev3",
      previewTemplate: previewTemplate,
      previewsContainer: "#previews", 
      clickable: "#clickable",
      init: function() {
              var submitButton = document.querySelector("#submit-all")
              myDropzone = this; // closure
              submitButton.addEventListener("click", function() {
                                                       myDropzone.processQueue(); // Tell Dropzone to process all queued files.
                                                      }
              );
          }
  });
</script>

  </body>
</html>
